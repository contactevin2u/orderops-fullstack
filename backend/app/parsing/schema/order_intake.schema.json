{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "order_id_hint": {"type": ["string","null"]},
    "customer_name": {"type": ["string","null"]},
    "phone": {"type": ["string","null"]},
    "event_type": {"type": "string", "enum": ["RETURN","COLLECT","INSTALMENT_CANCEL","BUYBACK","NONE"]},
    "appointment_date": {"type": ["string","null"], "format": "date"},
    "appointment_time": {"type": ["string","null"], "pattern": "^\\d{2}:\\d{2}$"},
    "items": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "name": {"type": ["string","null"]},
          "sku": {"type": ["string","null"]},
          "qty": {"type": ["number","null"]},
          "unit_price": {"type": ["number","null"]}
        },
        "required": ["name","sku","qty","unit_price"]
      }
    },
    "amounts": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "subtotal": {"type": ["number","null"]},
        "delivery_fee": {"type": ["number","null"]},
        "penalty_amount": {"type": ["number","null"]},
        "buyback_amount": {"type": ["number","null"]},
        "total": {"type": ["number","null"]}
      },
      "required": ["subtotal","delivery_fee","penalty_amount","buyback_amount","total"]
    },
    "notes": {"type": ["string","null"]}
  },
  "required": ["order_id_hint","customer_name","phone","event_type","appointment_date","appointment_time","items","amounts","notes"]
}
